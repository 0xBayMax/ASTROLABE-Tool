<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ‰∫§ÊòìÂºÄ‰ªìËÆ°ÁÆóÂô® - ASTROLABE ACADEMY</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            min-height: 100vh;
            padding: 15px;
            color: #ffffff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(30, 30, 30, 0.95);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: white;
            padding: 25px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .header p {
            font-size: 1em;
            opacity: 0.7;
            font-weight: 300;
        }

        .main-content {
            padding: 25px;
        }

        .module {
            background: rgba(40, 40, 40, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .module-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            letter-spacing: 0.5px;
        }

        .module-title::before {
            content: "‚öôÔ∏è";
            margin-right: 12px;
            font-size: 0.8em;
            color: #00d4ff;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 18px;
            margin-bottom: 18px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 400;
            color: #cccccc;
            margin-bottom: 8px;
            font-size: 0.9em;
            letter-spacing: 0.3px;
        }

        .form-group input,
        .form-group select {
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            font-size: 0.95em;
            background: rgba(60, 60, 60, 0.8);
            color: #ffffff;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
            background: rgba(70, 70, 70, 0.9);
        }

        .calculated-value {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
            color: #00d4ff;
            font-weight: 500;
            cursor: not-allowed;
        }

        .position-modules {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .position-module {
            background: rgba(50, 50, 50, 0.9);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }

        .position-module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #e74c3c, #f39c12);
        }

        .position-module.pioneer::before {
            background: linear-gradient(90deg, #e74c3c, #ff6b6b);
        }

        .position-module.expedition::before {
            background: linear-gradient(90deg, #f39c12, #ffa726);
        }

        .position-module.assault::before {
            background: linear-gradient(90deg, #27ae60, #4caf50);
        }

        .position-title {
            font-size: 1.2em;
            font-weight: 500;
            margin-bottom: 18px;
            text-align: center;
            padding: 12px;
            border-radius: 12px;
            letter-spacing: 0.5px;
        }

        .pioneer .position-title {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .expedition .position-title {
            background: linear-gradient(135deg, #f39c12, #d68910);
            color: white;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
        }

        .assault .position-title {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .position-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .position-item {
            text-align: center;
            padding: 12px;
            background: rgba(70, 70, 70, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(3px);
        }

        .position-item label {
            display: block;
            font-weight: 400;
            color: #cccccc;
            margin-bottom: 6px;
            font-size: 0.85em;
            letter-spacing: 0.3px;
        }

        .position-item .value {
            font-size: 1.05em;
            font-weight: 500;
            color: #ffffff;
        }

        .position-item input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            text-align: center;
            font-size: 0.9em;
            background: rgba(60, 60, 60, 0.8);
            color: #ffffff;
        }

        .profit-loss-row, .price-display-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .price-display-item {
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(3px);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .price-display-item label {
            display: block;
            margin-bottom: 8px;
            font-size: 12px;
            color: #bbb;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .price-display-item .value {
            font-size: 16px;
            font-weight: 600;
        }

        .profit-loss-item {
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(3px);
        }

        .profit-item {
            background: rgba(39, 174, 96, 0.15);
            border: 1px solid rgba(39, 174, 96, 0.4);
            color: #4caf50;
        }

        .loss-item {
            background: rgba(231, 76, 60, 0.15);
            border: 1px solid rgba(231, 76, 60, 0.4);
            color: #ff6b6b;
        }

        .ratio-display {
            background: rgba(139, 92, 246, 0.15);
            border: 1px solid rgba(139, 92, 246, 0.4);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(3px);
        }

        .ratio-display label {
            display: block;
            font-weight: 400;
            color: #c4b5fd;
            margin-bottom: 6px;
            font-size: 0.9em;
        }

        .ratio-display .value {
            font-size: 1.2em;
            font-weight: 500;
            color: #ddd6fe;
        }

        .profit-loss-item input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            font-size: 0.95em;
            background: rgba(60, 60, 60, 0.8);
            color: #ffffff;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .profit-loss-item input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
            background: rgba(70, 70, 70, 0.9);
        }

        .profit-loss-item input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .profit-loss-item label {
            margin-bottom: 15px;
            display: block;
            text-align: center;
        }

        .profit-loss-item .value {
            text-align: center !important;
            margin-top: 15px;
        }

        .unit {
            font-size: 0.8em;
            color: #999999;
            margin-left: 4px;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° - Ëá™ÈÄÇÂ∫îÂ±èÂπïÊØî‰æã */
        @media (max-width: 1200px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
            
            .position-modules {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 98%;
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .position-modules {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .position-row {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .profit-loss-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .module {
                padding: 15px;
            }
            
            .position-module {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 8px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .position-row {
                grid-template-columns: 1fr;
            }
            
            .form-group input,
            .form-group select {
                padding: 10px;
                font-size: 0.9em;
            }
        }
        
        /* Á°Æ‰øùÂÜÖÂÆπ‰∏ç‰ºöÊ∫¢Âá∫ÂÆπÂô® */
        * {
            box-sizing: border-box;
        }
        
        .module, .position-module {
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        input, select {
            min-width: 0;
            max-width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ ‰∫§ÊòìÂºÄ‰ªìËÆ°ÁÆóÂô®</h1>
            <p>For ASTROLABE VIP</p>
        </div>

        <div class="main-content">
            <!-- Âü∫Á°ÄÂèÇÊï∞Ê®°Âùó -->
            <div class="module">
                <div class="module-title">Âü∫Á°ÄÂèÇÊï∞ËÆæÁΩÆ</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="tradingPair">‰∫§ÊòìÂìÅÁßç</label>
                        <select id="tradingPair" onchange="updateCalculations()">
                            <option value="BTC">BTC</option>
                            <option value="ETH">ETH</option>
                            <option value="XAU">XAU</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="totalMargin">ÊÄª‰øùËØÅÈáëÈáëÈ¢ù <span class="unit">(U)</span></label>
                        <input type="number" id="totalMargin" placeholder="ËØ∑ËæìÂÖ•ÊÄª‰øùËØÅÈáë" oninput="updateCalculations()">
                    </div>
                    
                    <div class="form-group">
                        <label for="leverage">Êù†ÊùÜÂÄçÊï∞ <span class="unit">(ÂÄç)</span></label>
                        <input type="number" id="leverage" placeholder="ËØ∑ËæìÂÖ•Êù†ÊùÜÂÄçÊï∞" oninput="updateCalculations()">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="openRatio">ÂºÄ‰ªìÊØî‰æã <span class="unit">(%)</span></label>
                        <input type="number" id="openRatio" placeholder="ËØ∑ËæìÂÖ•ÂºÄ‰ªìÊØî‰æã" oninput="updateCalculations()">
                    </div>
                    
                    <div class="form-group">
                        <label for="direction">‰∫§ÊòìÊñπÂêë</label>
                        <select id="direction" onchange="updateCalculations()">
                            <option value="long">ÂÅöÂ§ö</option>
                            <option value="short">ÂÅöÁ©∫</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="openMargin">ÂºÄ‰ªì‰øùËØÅÈáëÈáëÈ¢ù <span class="unit">(U)</span></label>
                        <input type="number" id="openMargin" class="calculated-value" readonly>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="marketPrice">Â∏ÇÂú∫‰ª∑Ê†º <span class="unit">(U)</span></label>
                        <input type="number" id="marketPrice" placeholder="ËØ∑ËæìÂÖ•ÂΩìÂâçÂ∏ÇÂú∫‰ª∑Ê†º" oninput="updateCalculations()">
                    </div>
                </div>
            </div>

            <!-- ‰ªì‰ΩçÊ®°Âùó -->
            <div class="position-modules">
                <!-- Â§¥‰ªì-ÂÖàÈîãÂÜõ (10%) -->
                <div class="position-module pioneer">
                    <div class="position-title">üéØ Â§¥‰ªì-ÂÖàÈîãÂÜõ (10%)</div>
                    
                    <div class="position-row">
                        <div class="position-item">
                            <label>ÂºÄ‰ªìÈáëÈ¢ù</label>
                            <div class="value" id="pioneer-amount">0.00 <span class="unit">U</span></div>
                        </div>
                        <div class="position-item">
                            <label>Âêç‰πâ‰ª∑ÂÄº</label>
                            <div class="value" id="pioneer-nominal">0.00 <span class="unit">U</span></div>
                        </div>
                        <div class="position-item">
                            <label>ÂºÄ‰ªìÊï∞Èáè</label>
                            <div class="value" id="pioneer-quantity">0.00 <span class="unit unit-display" id="pioneer-unit">BTC</span></div>
                        </div>
                    </div>
                    
                    <div class="price-display-row">
                        <div class="price-display-item">
                            <label>Ê≠¢Áõà‰ª∑Ê†º</label>
                            <div class="value" id="pioneer-profit-target-price" style="color: #27ae60;">0.00</div>
                        </div>
                        <div class="price-display-item">
                            <label>Ê≠¢Êçü‰ª∑Ê†º</label>
                            <div class="value" id="pioneer-loss-target-price" style="color: #e17055;">0.00</div>
                        </div>
                    </div>
                    
                    <div class="profit-loss-row">
                        <div class="profit-loss-item profit-item">
                            <label>Ê≠¢ÁõàÈáëÈ¢ù (U)</label>
                            <input type="number" id="pioneer-profit-price" placeholder="ËæìÂÖ•Ê≠¢ÁõàÈáëÈ¢ù" oninput="updateProfitLoss('pioneer')">
                            <div class="value" id="pioneer-profit-amount" style="margin-top: 8px; color: #27ae60;">È¢ÑËÆ°ÁõàÂà©: 0.00 U</div>
                        </div>
                        <div class="profit-loss-item loss-item">
                            <label>Ê≠¢ÊçüÈáëÈ¢ù (U)</label>
                            <input type="number" id="pioneer-loss-price" placeholder="ËæìÂÖ•Ê≠¢ÊçüÈáëÈ¢ù" oninput="updateProfitLoss('pioneer')">
                            <div class="value" id="pioneer-loss-amount" style="margin-top: 8px; color: #e17055;">È¢ÑËÆ°‰∫èÊçü: 0.00 U</div>
                        </div>
                    </div>
                    
                    <div class="ratio-display">
                        <label>Áõà‰∫èÊØî</label>
                        <div class="value" id="pioneer-ratio">0.00</div>
                    </div>
                </div>

                <!-- ‰∫å‰ªì-ËøúÂæÅÂÜõ (30%) -->
                <div class="position-module expedition">
                    <div class="position-title">‚öîÔ∏è ‰∫å‰ªì-ËøúÂæÅÂÜõ (30%)</div>
                    
                    <div class="position-row">
                        <div class="position-item">
                            <label>ÂºÄ‰ªìÈáëÈ¢ù</label>
                            <div class="value" id="expedition-amount">0.00 <span class="unit">U</span></div>
                        </div>
                        <div class="position-item">
                            <label>Âêç‰πâ‰ª∑ÂÄº</label>
                            <div class="value" id="expedition-nominal">0.00 <span class="unit">U</span></div>
                        </div>
                        <div class="position-item">
                            <label>ÂºÄ‰ªìÊï∞Èáè</label>
                            <div class="value" id="expedition-quantity">0.00 <span class="unit unit-display" id="expedition-unit">BTC</span></div>
                        </div>
                    </div>
                    
                    <div class="price-display-row">
                        <div class="price-display-item">
                            <label>Ê≠¢Áõà‰ª∑Ê†º</label>
                            <div class="value" id="expedition-profit-target-price" style="color: #27ae60;">0.00</div>
                        </div>
                        <div class="price-display-item">
                            <label>Ê≠¢Êçü‰ª∑Ê†º</label>
                            <div class="value" id="expedition-loss-target-price" style="color: #e17055;">0.00</div>
                        </div>
                    </div>
                    
                    <div class="profit-loss-row">
                        <div class="profit-loss-item profit-item">
                            <label>Ê≠¢ÁõàÈáëÈ¢ù (U)</label>
                            <input type="number" id="expedition-profit-price" placeholder="ËæìÂÖ•Ê≠¢ÁõàÈáëÈ¢ù" oninput="updateProfitLoss('expedition')">
                            <div class="value" id="expedition-profit-amount" style="margin-top: 8px; color: #27ae60;">È¢ÑËÆ°ÁõàÂà©: 0.00 U</div>
                        </div>
                        <div class="profit-loss-item loss-item">
                            <label>Ê≠¢ÊçüÈáëÈ¢ù (U)</label>
                            <input type="number" id="expedition-loss-price" placeholder="ËæìÂÖ•Ê≠¢ÊçüÈáëÈ¢ù" oninput="updateProfitLoss('expedition')">
                            <div class="value" id="expedition-loss-amount" style="margin-top: 8px; color: #e17055;">È¢ÑËÆ°‰∫èÊçü: 0.00 U</div>
                        </div>
                    </div>
                    
                    <div class="ratio-display">
                        <label>Áõà‰∫èÊØî</label>
                        <div class="value" id="expedition-ratio">0.00</div>
                    </div>
                </div>

                <!-- ‰∏â‰ªì-ÂÜ≤ÈîãÂÜõ (60%) -->
                <div class="position-module assault">
                    <div class="position-title">üöÄ ‰∏â‰ªì-ÂÜ≤ÈîãÂÜõ (60%)</div>
                    
                    <div class="position-row">
                        <div class="position-item">
                            <label>ÂºÄ‰ªìÈáëÈ¢ù</label>
                            <div class="value" id="assault-amount">0.00 <span class="unit">U</span></div>
                        </div>
                        <div class="position-item">
                            <label>Âêç‰πâ‰ª∑ÂÄº</label>
                            <div class="value" id="assault-nominal">0.00 <span class="unit">U</span></div>
                        </div>
                        <div class="position-item">
                            <label>ÂºÄ‰ªìÊï∞Èáè</label>
                            <div class="value" id="assault-quantity">0.00 <span class="unit unit-display" id="assault-unit">BTC</span></div>
                        </div>
                    </div>
                    
                    <div class="price-display-row">
                        <div class="price-display-item">
                            <label>Ê≠¢Áõà‰ª∑Ê†º</label>
                            <div class="value" id="assault-profit-target-price" style="color: #27ae60;">0.00</div>
                        </div>
                        <div class="price-display-item">
                            <label>Ê≠¢Êçü‰ª∑Ê†º</label>
                            <div class="value" id="assault-loss-target-price" style="color: #e17055;">0.00</div>
                        </div>
                    </div>
                    
                    <div class="profit-loss-row">
                        <div class="profit-loss-item profit-item">
                            <label>Ê≠¢ÁõàÈáëÈ¢ù (U)</label>
                            <input type="number" id="assault-profit-price" placeholder="ËæìÂÖ•Ê≠¢ÁõàÈáëÈ¢ù" oninput="updateProfitLoss('assault')">
                            <div class="value" id="assault-profit-amount" style="margin-top: 8px; color: #27ae60;">È¢ÑËÆ°ÁõàÂà©: 0.00 U</div>
                        </div>
                        <div class="profit-loss-item loss-item">
                            <label>Ê≠¢ÊçüÈáëÈ¢ù (U)</label>
                            <input type="number" id="assault-loss-price" placeholder="ËæìÂÖ•Ê≠¢ÊçüÈáëÈ¢ù" oninput="updateProfitLoss('assault')">
                            <div class="value" id="assault-loss-amount" style="margin-top: 8px; color: #e17055;">È¢ÑËÆ°‰∫èÊçü: 0.00 U</div>
                        </div>
                    </div>
                    
                    <div class="ratio-display">
                        <label>Áõà‰∫èÊØî</label>
                        <div class="value" id="assault-ratio">0.00</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ëé∑Âèñ‰∫§ÊòìÂìÅÁßçÂçï‰Ωç
        function getTradingUnit(pair) {
            switch(pair) {
                case 'BTC': return 'BTC';
                case 'ETH': return 'ETH';
                case 'XAU': return 'Êâã';
                default: return 'BTC';
            }
        }

        // Êõ¥Êñ∞ÊâÄÊúâËÆ°ÁÆó
        function updateCalculations() {
            const totalMargin = parseFloat(document.getElementById('totalMargin').value) || 0;
            const openRatio = parseFloat(document.getElementById('openRatio').value) || 0;
            const leverage = parseFloat(document.getElementById('leverage').value) || 0;
            const marketPrice = parseFloat(document.getElementById('marketPrice').value) || 0;
            const tradingPair = document.getElementById('tradingPair').value;
            
            // ËÆ°ÁÆóÂºÄ‰ªì‰øùËØÅÈáë
            const openMargin = totalMargin * (openRatio / 100);
            document.getElementById('openMargin').value = openMargin.toFixed(2);
            
            // Êõ¥Êñ∞Âçï‰ΩçÊòæÁ§∫ - ‰øÆÂ§çÂçï‰ΩçÊõ¥Êñ∞ÈóÆÈ¢ò
            const unit = getTradingUnit(tradingPair);
            const unitElements = document.querySelectorAll('.unit-display');
            unitElements.forEach(element => {
                element.textContent = unit;
            });
            
            // ËÆ°ÁÆóÂêÑ‰ªì‰ΩçÊï∞ÊçÆ
            updatePositionData('pioneer', openMargin, leverage, marketPrice, 0.10, tradingPair);
            updatePositionData('expedition', openMargin, leverage, marketPrice, 0.30, tradingPair);
            updatePositionData('assault', openMargin, leverage, marketPrice, 0.60, tradingPair);
            
            // Êõ¥Êñ∞Áõà‰∫èËÆ°ÁÆó
            updateProfitLoss('pioneer');
            updateProfitLoss('expedition');
            updateProfitLoss('assault');
        }

        // Êõ¥Êñ∞‰ªì‰ΩçÊï∞ÊçÆ
        function updatePositionData(position, openMargin, leverage, marketPrice, ratio, tradingPair) {
            const amount = openMargin * ratio;
            const nominal = amount * leverage;
            let quantity = 0;
            
            if (marketPrice > 0) {
                if (tradingPair === 'XAU') {
                    // XAUÁöÑËÆ°ÁÆóÈÄªËæëÔºö‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÂÖ¨Âºè
                    // Lots = (E √ó P √ó L) / (Price √ó 100)
                    // ËøôÈáåEÊòØÊÄªËµÑÈáëÈáèÔºåPÊòØÂºÄ‰ªìÊØî‰æãÔºåLÊòØÊù†ÊùÜÔºåPriceÊòØÈªÑÈáëÁé∞‰ª∑
                    const totalMargin = parseFloat(document.getElementById('totalMargin').value) || 0;
                    const openRatio = parseFloat(document.getElementById('openRatio').value) || 0;
                    quantity = (totalMargin * (openRatio / 100) * ratio * leverage) / (marketPrice * 100);
                } else {
                    // BTCÂíåETHÁöÑËÆ°ÁÆóÈÄªËæë
                    quantity = nominal / marketPrice;
                }
            }
            
            document.getElementById(`${position}-amount`).textContent = `${amount.toFixed(2)} U`;
            document.getElementById(`${position}-nominal`).textContent = `${nominal.toFixed(2)} U`;
            document.getElementById(`${position}-quantity`).textContent = `${quantity.toFixed(6)} ${getTradingUnit(tradingPair)}`;
        }

        // Êõ¥Êñ∞Áõà‰∫èËÆ°ÁÆó - ÊåâÁÖßÁî®Êà∑Ë¶ÅÊ±ÇÔºöÂºÄ‰ªìÊï∞Èáè √ó Ê≠¢ÁõàÈáëÈ¢ù = ÁõàÂà©ÔºåÂºÄ‰ªìÊï∞Èáè √ó Ê≠¢ÊçüÈáëÈ¢ù = ‰∫èÊçü
        function updateProfitLoss(position) {
            const profitAmount = parseFloat(document.getElementById(`${position}-profit-price`).value) || 0;
            const lossAmount = parseFloat(document.getElementById(`${position}-loss-price`).value) || 0;
            
            // Ëé∑ÂèñÂ∏ÇÂú∫‰ª∑Ê†º
            const marketPrice = parseFloat(document.getElementById('marketPrice').value) || 0;
            
            // Ëé∑ÂèñÂΩìÂâç‰ªì‰ΩçÁöÑÊï∞Èáè
            const quantityText = document.getElementById(`${position}-quantity`).textContent;
            const quantity = parseFloat(quantityText.split(' ')[0]) || 0;
            
            // Ëé∑Âèñ‰∫§ÊòìÂìÅÁßç
            const tradingPair = document.getElementById('tradingPair').value;
            
            // ËÆ°ÁÆóÊ≠¢Áõà‰ª∑Ê†ºÂíåÊ≠¢Êçü‰ª∑Ê†ºÔºàÈªòËÆ§ÂÅöÂ§öÔºâ
            // ÂÅöÂ§öÊó∂ÔºöÊ≠¢Áõà‰ª∑Ê†º = Â∏ÇÂú∫‰ª∑Ê†º + Ê≠¢ÁõàÈáëÈ¢ùÔºåÊ≠¢Êçü‰ª∑Ê†º = Â∏ÇÂú∫‰ª∑Ê†º - Ê≠¢ÊçüÈáëÈ¢ù
            const profitTargetPrice = marketPrice + profitAmount;
            const lossTargetPrice = marketPrice - lossAmount;
            
            // Êõ¥Êñ∞Ê≠¢Áõà‰ª∑Ê†ºÂíåÊ≠¢Êçü‰ª∑Ê†ºÊòæÁ§∫
            const profitTargetElement = document.getElementById(`${position}-profit-target-price`);
            const lossTargetElement = document.getElementById(`${position}-loss-target-price`);
            
            if (profitTargetElement) {
                profitTargetElement.textContent = profitTargetPrice.toFixed(2);
            }
            if (lossTargetElement) {
                lossTargetElement.textContent = lossTargetPrice.toFixed(2);
            }
            
            let totalProfitAmount = 0;
            let totalLossAmount = 0;
            
            if (quantity > 0) {
                if (tradingPair === 'XAU') {
                    // ÈªÑÈáëËÆ°ÁÆóÔºö1Êâã = 100ÁõéÂè∏ÔºåÊØèÁÇπÂèòÂä® = 100ÁæéÈáë
                    // ÂºÄ‰ªìÊï∞ÈáèÔºàÊâãÔºâ √ó Ê≠¢ÁõàÈáëÈ¢ùÔºàÁÇπÊï∞Ôºâ √ó 100ÔºàÂêàÁ∫¶Â§ßÂ∞èÔºâ
                    totalProfitAmount = quantity * profitAmount * 100;
                    totalLossAmount = quantity * lossAmount * 100;
                } else {
                    // BTCÂíåETHÁöÑËÆ°ÁÆóÔºöÂºÄ‰ªìÊï∞Èáè √ó Ê≠¢ÁõàÈáëÈ¢ù = ÁõàÂà©
                    totalProfitAmount = quantity * profitAmount;
                    totalLossAmount = quantity * lossAmount;
                }
            }
            
            // Êõ¥Êñ∞ÊòæÁ§∫
            document.getElementById(`${position}-profit-amount`).textContent = `È¢ÑËÆ°ÁõàÂà©: ${totalProfitAmount.toFixed(2)} U`;
            document.getElementById(`${position}-loss-amount`).textContent = `È¢ÑËÆ°‰∫èÊçü: -${totalLossAmount.toFixed(2)} U`;
            
            // ËÆ°ÁÆóÁõà‰∫èÊØî - Ê†ºÂºèÂåñ‰∏∫ X:X
            let ratioText = '0:0';
            if (totalLossAmount > 0 && totalProfitAmount > 0) {
                const ratio = totalProfitAmount / totalLossAmount;
                if (ratio >= 1) {
                    ratioText = `${ratio.toFixed(1)}:1`;
                } else {
                    ratioText = `1:${(1/ratio).toFixed(1)}`;
                }
            }
            document.getElementById(`${position}-ratio`).textContent = ratioText;
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // ËÆæÁΩÆÈªòËÆ§ÂÄº
            document.getElementById('totalMargin').value = '2500';
            document.getElementById('leverage').value = '60';
            document.getElementById('openRatio').value = '15';
            document.getElementById('marketPrice').value = '3500';
            
            // ÂàùÂßãËÆ°ÁÆó
            updateCalculations();
        });
    </script>
</body>
</html>